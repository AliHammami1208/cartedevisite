name : Newman API Tests

on:
 push: 
   branches: ["main"]

jobs:
  run-api-tests:
    runs-on: ubuntu-latest


    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: installation de node js
        uses: actions/setup-node@v4
        with :
          node-version: "18"
      
      - name: installation librairie
        run: npm install

      - name: lancement de server
        run: |
          nohup node server.js > server.log 2>&1 &
          sleep 5

